# 瞬间

这是一个能让你发动态的网页项目

具体功能:
1.你可以通过网页或者客户端(安卓)进行管理在服务端的动态
2.实现md语法与渲染
3.支持嵌入HTML
4.通过静态网页进行对接

## 项目架构

```
/
│
├── server.py                     # 服务端（Flask）
│
├── config.json                   # 配置文件  
│
├── static/                       # 静态文件目录
│     ├── index.html              # 动态展示页面
│     ├── status.html             # 状态历史查看
│     ├── post.html               # 发布动态页面
│     ├── css/
│     ├── js/
│     └── img/
│
├── posts/                        # 动态正文（Markdown 格式）
│     ├── 2025-01-20-1.md         # 动态文件
│     ├── 2025-01-20-2.md         # 动态文件
│     └── ...                     # 更多动态文件
│
├── status/                       # 状态记录（Markdown 格式）
│     ├── 2025-01-20-1.md         # 每天一条或每次更新一条状态
│     ├── 2025-01-20-2.md         # 状态记录文件
│     └── ...                     # 更多历史状态文件
│
└── upload/                       # 上传图片或背景
      ├── bg_20250120_1.png
      └── ...
```

## 存储

### 配置文件

```
{
  "server": {
    "host": "127.0.0.1",   // 服务器地址
    "port": 5000           // 服务器端口
  },
  "api_key": "your-api-key-here",   // 你可以设置一个 API Key 来保护你的接口,留空则无
  "view_time_limit_days": 7    // 设置访问时间限制为 7 天
  "comment": false  //是否开启评论功能(未实现)
}
```

### 动态

动态文件示例

`posts/2025-01-20-1.md`

```
---
time: "2025-01-20 10:00:00"
tags: ["微信"]
---

今天继续开发动态系统，优化了状态管理模块，整合了 Markdown 支持。  
在实现后台功能时遇到了一些小问题，但成功解决了。

正在思考如何优化 API 性能，未来可能会采用缓存机制来提高响应速度。

```

### 状态

状态文件示例

`status/2025-01-20-1.md`

```
---
time: "2025-01-20 10:00:00"
name: "coding(自定义)"
background: "/upload/bg_20250120_1.png"
---

正在编写动态系统代码，忙碌而充实！

```

## 后端API

### 获取动态列表

`GET /api/post/list`

**实现逻辑：**

1. 获取 `posts/` 文件夹下所有的 `.md` 文件。
2. 过滤出符合 **访问时间限制** 的动态，只有在时间范围内的动态才会返回。
3. 返回动态列表，包括内容、发布时间、文件名等信息。

返回示例:

```
[
  {
    "file": "2025-01-20-1.md",
    "time": "2025-01-20 10:00:00",
    "tags": ["微信"],
    "content": "今天继续开发动态系统，加入了时间限制功能。"
  },
  {
    "file": "2025-01-19-2.md",
    "time": "2025-01-19 15:00:00",
    "tags": ["微信"],
    "content": "状态功能设计完成，准备测试。"
  }
]

```

### 获取单个动态详情

`GET /api/post/detail?file=2025-01-20-1.md`

**实现逻辑：**

- 根据 `file` 参数获取指定的动态文件。
- 返回文件中的内容（时间和正文）。

返回示例

```
{
  "time": "2025-01-20 10:00:00",
  "tags": ["微信"],
  "content": "今天继续开发动态系统，加入了时间限制功能。"
}
```

### 获取当前状态

`GET /api/state/current`

**实现逻辑**

- 从 `status/current.md` 获取当前的状态信息。如果 `type` 字段为空，则返回 `null`。

返回示例

```
{
  "time": "2025-01-20 10:00:00",
  "name": "coding",
  "content": "正在写动态系统",
  "background": "/upload/bg_20250120_1.png"
}

```

### 搜索动态/状态

`GET /api/search?q=动态系统`

**实现逻辑：**

- 根据关键词搜索 `posts/` 和 `status/` 中的内容，返回匹配的动态或状态文件。

返回示例

```
[
  {
    "file": "2025-01-20-1.md",
    "type": "post",
    "time": "2025-01-20 10:00:00",
    "content": "今天继续开发动态系统，加入了时间限制功能。"
  },
  {
    "file": "2025-01-19-1.md",
    "type": "state",
    "time": "2025-01-19 15:00:00",
    "name": "coding",
    "content": "今天测试了状态功能。"
  }
]
```

